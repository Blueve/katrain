VERSION = "1.3.0"
HOMEPAGE = "https://github.com/sanderland/katrain"
CONFIG_MIN_VERSION = "1.3.0"  # keep config files from this version

OUTPUT_ERROR = -1
OUTPUT_KATAGO_STDERR = -0.5
OUTPUT_INFO = 0
OUTPUT_DEBUG = 1
OUTPUT_EXTRA_DEBUG = 2

STATUS_ANALYSIS = 1.0  # same priority for analysis/info
STATUS_INFO = 1.1
STATUS_TEACHING = 2.0
STATUS_ERROR = 1000.0

PLAYER_HUMAN, PLAYER_AI = "player:human", "player:ai"
PLAYER_TYPES = [PLAYER_HUMAN, PLAYER_AI]

PLAYING_NORMAL, PLAYING_TEACHING = "game:normal", "game:teach"
GAME_TYPES = [PLAYING_NORMAL, PLAYING_TEACHING]

MODE_PLAY, MODE_ANALYZE = "play", "analyze"

AI_DEFAULT = "ai:default"
AI_HANDICAP = "ai:handicap"
AI_SCORELOSS = "ai:scoreloss"
AI_WEIGHTED = "ai:p:weighted"
AI_JIGO = "ai:jigo"
AI_POLICY = "ai:policy"
AI_PICK = "ai:p:pick"
AI_LOCAL = "ai:p:local"
AI_TENUKI = "ai:p:tenuki"
AI_INFLUENCE = "ai:p:influence"
AI_TERRITORY = "ai:p:territory"
AI_RANK = "ai:p:rank"

AI_CONFIG_DEFAULT = AI_SCORELOSS

AI_STRATEGIES_ENGINE = [AI_DEFAULT, AI_HANDICAP, AI_SCORELOSS, AI_JIGO]
AI_STRATEGIES_PICK = [AI_PICK, AI_LOCAL, AI_TENUKI, AI_INFLUENCE, AI_TERRITORY, AI_RANK]
AI_STRATEGIES_POLICY = [AI_WEIGHTED, AI_POLICY] + AI_STRATEGIES_PICK
AI_STRATEGIES = AI_STRATEGIES_ENGINE + AI_STRATEGIES_POLICY
AI_STRATEGIES_RECOMMENDED_ORDER = [
    AI_DEFAULT,
    AI_RANK,
    AI_HANDICAP,
    AI_SCORELOSS,
    AI_POLICY,
    AI_WEIGHTED,
    AI_PICK,
    AI_LOCAL,
    AI_TENUKI,
    AI_TERRITORY,
    AI_INFLUENCE,
    AI_JIGO,
]

AI_STRENGTH = {  # dan ranks
    AI_DEFAULT: 9,
    AI_POLICY: 5,
    AI_JIGO: float("nan"),
    AI_SCORELOSS: -4,
    AI_WEIGHTED: -4,
    AI_PICK: -7,
    AI_LOCAL: -4,
    AI_TENUKI: -7,
    AI_INFLUENCE: -7,
    AI_TERRITORY: -7,
    AI_RANK: float("nan"),
}

AI_OPTION_VALUES = {
    "kyu_rank": [(k, f"{k}[strength:kyu]") for k in range(15, 0, -1)]
    + [(k, f"{1-k}[strength:dan]") for k in range(0, -3, -1)],
    "strength": [0.25, 0.5, 1, 2, 4],
    "opening_moves": range(0, 51),
    "pick_override": [0, 0.5, 0.6, 0.7, 0.8, 0.85, 0.9, 0.95, 0.99, 1],
    "lower_bound": [(v, f"{v:.2%}") for v in [0, 0.0001, 0.0005, 0.001, 0.005, 0.01, 0.05]],
    "weaken_fac": [x / 20 for x in range(10, 3 * 20 + 1)],
    "endgame": [x / 100 for x in range(10, 80, 5)],
    "pick_frac": [x / 100 for x in range(0, 101, 5)],
    "pick_n": range(0, 26),
    "stddev": [x / 2 for x in range(21)],
    "line_weight": range(0, 11),
    "threshold": [2, 2.5, 3, 3.5, 4, 4.5],
    "automatic": "bool",
    "pda": [(x / 10, f"{'W' if x<0 else 'B'}+{abs(x/10):.1f}") for x in range(-30, 31)],
}
AI_KEY_PROPERTIES = {"kyu_rank", "strength", "weaken_fac", "pick_frac", "pick_n", "automatic"}

CALIBRATED_RANK_ELO = [
    (39.36921298625589, 18),
    (96.95581072853861, 17),
    (154.54240847082144, 16),
    (212.12900621310428, 15),
    (269.7156039553871, 14),
    (327.30220169766983, 13),
    (384.88879943995266, 12),
    (442.4753971822355, 11),
    (500.06199492451833, 10),
    (557.6485926668012, 9),
    (615.235190409084, 8),
    (672.8217881513667, 7),
    (730.4083858936496, 6),
    (787.9949836359324, 5),
    (845.5815813782152, 4),
    (903.168179120498, 3),
    (960.7547768627808, 2),
    (1018.3413746050636, 1),
    (1075.9279723473464, 0),
    (1133.5145700896292, -1),
    (1191.101167831912, -2),
    (1700, -4),
]
AI_WEIGHTED_ELO = [
    (0.5, 1591.4486833932992),
    (1.0, 1266.2591850212696),
    (1.25, 1121.5661132041557),
    (1.5, 960.0966363156612),
    (1.75, 800.3124873968906),
    (2, 670.1137021076612),
    (2.5, 516.8371296455036),
    (3.0, 359.9621037249864),
]

AI_LOCAL_ELO_GRID = [
    [0.0, 0.05, 0.1, 0.2, 0.3, 0.5, 0.75, 1.0],
    [0, 5, 10, 15, 25, 50],
    [
        [200.0, 806.21655824, 1293.32037587, 1392.29465619, 1423.34086023, 1475.35678018, 1631.70997963, 1700.0],
        [271.88274382, 1177.38904493, 1357.48028947, 1427.89588231, 1471.76588449, 1531.66834985, 1700.0, 1700.0],
        [725.2189244, 1233.32342855, 1392.46449871, 1443.99394784, 1415.66026743, 1490.09450071, 1700.0, 1700.0],
        [986.18843485, 1315.19341299, 1423.36540576, 1438.78299774, 1499.2278826, 1570.46885902, 1700.0, 1700.0],
        [1334.16982939, 1401.31972528, 1430.66495587, 1450.4662417, 1510.77588056, 1575.68586904, 1700.0, 1700.0],
        [1388.06911342, 1451.04383633, 1391.07099726, 1500.84987644, 1520.43287013, 1700.0, 1700.0, 1700.0],
    ],
]

AI_TENUKI_ELO_GRID = [
    [0.0, 0.05, 0.1, 0.2, 0.3, 0.5, 0.75, 1.0],
    [0, 5, 10, 15, 25, 50],
    [
        [100, 381.67199019, 614.9022033, 807.74726571, 972.75719068, 1081.59259337, 1280.81772836, 1700.0],
        [302.05524257, 447.16707419, 634.67443071, 847.73134951, 980.06971493, 1100.47221165, 1424.97514319, 1700.0],
        [395.99120046, 565.59284207, 707.35509522, 883.39067276, 997.20744208, 1125.50994832, 1392.10412559, 1700.0],
        [468.10121071, 660.65479606, 774.42716944, 862.84933335, 1010.69484968, 1156.68204921, 1436.80030417, 1700.0],
        [652.8285294, 753.57925069, 797.59399585, 898.99936585, 1042.96870256, 1222.48814041, 1470.92773923, 1700.0],
        [901.40390178, 910.28781658, 958.0281189, 1126.63475026, 1203.75546167, 1352.13779312, 1493.13435049, 1700.0],
    ],
]

AI_TERRITORY_ELO_GRID = [
    [0.0, 0.05, 0.1, 0.2, 0.3, 0.5, 0.75, 1.0],
    [0, 5, 10, 15, 25, 50],
    [
        [0, 491.99354617, 652.54536499, 827.56438866, 997.07978087, 1207.47161931, 1461.93571907, 1700.0],
        [119.03096728, 554.30545095, 747.74695281, 852.1114908, 1049.58656646, 1250.72046036, 1475.72706895, 1700.0],
        [348.45765825, 589.16893663, 775.81559273, 909.21125406, 1073.92675377, 1300.11842657, 1485.95667768, 1700.0],
        [538.88999479, 676.21745434, 821.27037414, 950.58649838, 1126.1274156, 1358.9290967, 1500.00471917, 1700.0],
        [597.90794583, 741.3513872, 884.73016339, 972.54025369, 1150.30545203, 1430.55449307, 1566.81074945, 1700.0],
        [826.03134794, 997.58427811, 1093.54942758, 1214.9588177, 1336.40285376, 1485.32581091, 1700.0, 1700.0],
    ],
]

AI_INFLUENCE_ELO_GRID = [
    [0.0, 0.05, 0.1, 0.2, 0.3, 0.5, 0.75, 1.0],
    [0, 5, 10, 15, 25, 50],
    [
        [75.9591829, 483.922460, 703.633297, 898.804165, 1041.90611, 1180.64701, 1500.22844, 1510.60242,],
        [285.94611, 598.87800, 673.848093, 866.826392, 1032.48205, 1334.284716, 1510.55098, 1520.774582,],
        [478.37028, 643.868326, 837.7348868, 945.3233087, 1093.119452, 1350.0936572, 1515.4939758, 1530.1492031,],
        [570.841325, 689.7079695, 848.3192009, 1021.7089457, 1143.3090057, 1371.453538, 1520.4852553, 1540.64105,],
        [749.495401, 771.144054, 865.13815, 1019.895054, 1107.959449, 1383.373536, 1525.298316, 1549.8151732,],
        [882.96911, 902.885106, 1057.305618, 1178.3968159, 1369.4749768, 1518.303563, 1530.772607, 1550.508035,],
    ],
]
